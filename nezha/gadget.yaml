volumes:
  nezha:
    schema: gpt
    bootloader: u-boot
    structure:
      - name: spl
        type: bare
        offset: 131072
        size: 65536
        content:
          - image: boot0_sdcard_sun20iw1p1.bin
        update:
          edition: 1
        # The boot0 SPL used by the Nezha board expects to load a TOC1 image
        # containing OpenSBI, U-Boot, and a DTB from sector 32800. If loading
        # fails, it tries to read a backup from sector 24576.
      - name: toc1-backup
        type: bare
        offset: 12582912
        size: 1048576
        content:
          - image: u-boot.toc1
        update:
          edition: 1
      - name: toc1
        type: bare
        offset: 16793600
        size: 1048576
        content:
          - image: u-boot.toc1
        update:
          edition: 1
      - name: ubuntu-seed
        role: system-seed
        filesystem: vfat
        type: EBD0A0A2-B9E5-4433-87C0-68B6B72699C7
        size: 800M
        offset: 40M
        content:
          - source: boot.scr
            target: /
        update:
          edition: 1
      - name: ubuntu-boot
        role: system-boot
        filesystem: ext4
        type: 0FC63DAF-8483-4772-8E79-3D69D8477DE4
        size: 800M
        content:
          - source: boot.sel
            target: uboot/ubuntu/boot.sel
        update:
          edition: 1
      - name: ubuntu-save
        role: system-save
        filesystem: ext4
        type: 0FC63DAF-8483-4772-8E79-3D69D8477DE4
        size: 16M
      - name: ubuntu-data
        role: system-data
        filesystem: ext4
        type: 0FC63DAF-8483-4772-8E79-3D69D8477DE4
        size: 1M

defaults:
  system:
    watchdog:
      runtime-timeout: 16s
      shutdown-timeout: 1m
